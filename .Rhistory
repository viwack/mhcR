weight = 2,
opacity = 1,
color = "purple",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "Senate Districts"
) %>%
addLayersControl(
overlayGroups = c("House Districts", "Senate Districts"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup(c("House Districts", "Senate Districts"))
runApp()
runApp()
runApp()
library(sf)
house_districts <- read_sf("Michigan_State_House_Districts_2021.json")
senate_districts <- read_sf("Michigan_State_Senate_Districts_2021.json")
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addPolygons(
data = house_districts,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "House Districts"
) %>%
addPolygons(
data = senate_districts,
weight = 2,
opacity = 1,
color = "purple",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "Senate Districts"
) %>%
addLayersControl(
overlayGroups = c("House Districts", "Senate Districts"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup(c("House Districts", "Senate Districts"))
runApp()
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addPolygons(
data = house_districts,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "House Districts"
) %>%
addPolygons(
data = senate_districts,
weight = 2,
opacity = 1,
color = "purple",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "Senate Districts"
) %>%
addLayersControl(
overlayGroups = c("House Districts", "Senate Districts"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup(c("House Districts", "Senate Districts"))
runApp()
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addGeoJSON(
house_districts_json,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
group = "House Districts"
) %>%
addGeoJSON(
senate_districts_json,
weight = 2,
opacity = 1,
color = "purple",
fillOpacity = 0.4,
group = "Senate Districts"
) %>%
addLayersControl(
overlayGroups = c("House Districts", "Senate Districts"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup(c("House Districts", "Senate Districts"))
runApp()
output$leafletMap <- renderLeaflet({
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addPolygons(
data = house_districts,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "House Districts"
) %>%
addPolygons(
data = senate_districts,
weight = 2,
opacity = 1,
color = "purple",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "Senate Districts"
) %>%
addLayersControl(
overlayGroups = c("House Districts", "Senate Districts"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup(c("House Districts", "Senate Districts"))
})
leaflet() %>%
+         addTiles() %>%
+         setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
+         addPolygons(
+             data = house_districts,
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addPolygons(
data = house_districts,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "House Districts"
) %>%
addPolygons(
data = senate_districts,
weight = 2,
opacity = 1,
color = "purple",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "Senate Districts"
) %>%
addLayersControl(
overlayGroups = c("House Districts", "Senate Districts"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup(c("House Districts", "Senate Districts"))
runApp()
runApp()
runApp()
runApp()
runApp()
leaflet()
leaflet() %>%
addTiles()
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6)
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addPolygons(
data = house_districts,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "House Districts"
)
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addPolygons(
data = house_districts,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "House Districts"
) %>%
addPolygons(
data = senate_districts,
weight = 2,
opacity = 1,
color = "purple",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "Senate Districts"
)
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addPolygons(
data = house_districts,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "House Districts"
) %>%
addPolygons(
data = senate_districts,
weight = 2,
opacity = 1,
color = "purple",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "Senate Districts"
) %>%
addLayersControl(
overlayGroups = c("House Districts", "Senate Districts"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup(c("House Districts", "Senate Districts"))
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addPolygons(
data = house_districts,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "House Districts"
) %>%
addPolygons(
data = senate_districts,
weight = 2,
opacity = 1,
color = "purple",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "Senate Districts"
) %>%
addLayersControl(
overlayGroups = c("House Districts", "Senate Districts"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup(c("House Districts", "Senate Districts")) %>%
build_marker_layer <- function(map, layer_name) {
if (layer_name == "MHVillage Markers (includes site info)") {
mhvillage_df$label <- paste(
"Name: ", as.character(mhvillage_df$Name),
br(),
"Sites: ", as.character(mhvillage_df$Sites),
br(),
"Address: ", mhvillage_df$FullstreetAddress,
br(),
"House District: ", as.character(mhvillage_df$`House district`),
br(),
"Senate District: ", as.character(mhvillage_df$`Senate district`),
br(),
"Source: MHVillage"
)
# Add your specific code to build the Marker MHVillage layer
map <- map %>% addMarkers(lng = as.numeric(mhvillage_df$longitude),
lat = as.numeric(mhvillage_df$latitude),
group = "MHVillage Markers (includes site info)",
popup = mhvillage_df$label,
clusterOptions = markerClusterOptions())
} else if (layer_name == "LARA Markers (includes site info)") {
lara_df$label <- paste(
"Name: ", ifelse(lara_df$DBA != "", lara_df$DBA, lara_df$`Owner / Community_Name`),
br(),
"Sites: ", as.character(lara_df$`Total_#_Sites`),
br(),
"Address: ", lara_df$Location_Address,
br(),
"House District: ", as.character(lara_df$`House district`),
br(),
"Senate District: ", as.character(lara_df$`Senate district`),
br(),
"Source: LARA"
)
# Add your specific code to build the Marker LARA layer
map <- map %>% addMarkers(lng = as.numeric(lara_df$longitude),
lat = as.numeric(lara_df$latitude),
group = "LARA Markers (includes site info)",
popup = lara_df$label,
clusterOptions = markerClusterOptions())
} else if (layer_name == "MHVillage Circles (location only)") {
# Add your specific code to build the Circle MHVillage layer
map <- map %>% addCircles(lng = as.numeric(mhvillage_df$longitude),
lat = as.numeric(mhvillage_df$latitude),
color = "orange",
opacity = 0.9,
radius = 4,
group = "MHVillage Circles (location only)")
} else if (layer_name == "LARA Circles (location only)") {
# Add your specific code to build the Circle LARA layer
map <- map %>% addCircles(lng = as.numeric(lara_df$longitude),
lat = as.numeric(lara_df$latitude),
color = "blue",
opacity = 0.7,
group = "LARA Circles (location only)")
}
return(map)
}
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addPolygons(
data = house_districts,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "House Districts"
) %>%
addPolygons(
data = senate_districts,
weight = 2,
opacity = 1,
color = "purple",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "Senate Districts"
) %>%
addLayersControl(
overlayGroups = c("House Districts", "Senate Districts"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup(c("House Districts", "Senate Districts")) %>%
build_marker_layer("MHVillage Markers (include site info)")
leaflet() %>%
+     addTiles() %>%
+     setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
+     addPolygons(
+         data = house_districts,
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addPolygons(
data = house_districts,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "House Districts"
) %>%
addPolygons(
data = senate_districts,
weight = 2,
opacity = 1,
color = "purple",
fillOpacity = 0.4,
highlightOptions = highlightOptions(
weight = 5,
color = "yellow",
fillColor =  "orange",
bringToFront = FALSE
),
group = "Senate Districts"
) %>%
addLayersControl(
overlayGroups = c("House Districts", "Senate Districts"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup(c("House Districts", "Senate Districts")) %>%
build_marker_layer("MHVillage Markers (includes site info)")
runApp()
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addGeoJSON(geojson = house_districts_json,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
group = "House Districts"
)
house_districts_json <- fromJSON("Michigan_State_House_Districts_2021.json")
leaflet() %>%
+     addTiles() %>%
+     setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
+     addGeoJSON(geojson = house_districts_json,
+                weight = 2,
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addGeoJSON(geojson = house_districts_json,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
group = "House Districts"
)
leaflet() %>%
addTiles() %>%
setView(lng = -85.6024, lat = 44.3148, zoom = 6) %>%
addGeoJSON(house_districts_json,
weight = 2,
opacity = 1,
color = "green",
fillOpacity = 0.4,
group = "House Districts"
)
house_districts_json <- fromJSON("Michigan_State_House_Districts_2021.json")
leaflet() %>%
addTiles() %>%
runApp()
runApp()
